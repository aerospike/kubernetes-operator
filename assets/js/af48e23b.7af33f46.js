"use strict";(self.webpackChunkwebsite_operator=self.webpackChunkwebsite_operator||[]).push([[5737],{3905:function(e,t,r){r.d(t,{Zo:function(){return u},kt:function(){return d}});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),i=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},u=function(e){var t=i(e.components);return n.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},f=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),f=i(r),d=a,m=f["".concat(l,".").concat(d)]||f[d]||p[d]||o;return r?n.createElement(m,s(s({ref:t},u),{},{components:r})):n.createElement(m,s({ref:t},u))}));function d(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,s=new Array(o);s[0]=f;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:a,s[1]=c;for(var i=2;i<o;i++)s[i]=r[i];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}f.displayName="MDXCreateElement"},2624:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return c},contentTitle:function(){return l},metadata:function(){return i},toc:function(){return u},default:function(){return f}});var n=r(3117),a=r(102),o=(r(7294),r(3905)),s=["components"],c={title:"Kubernetes Secrets",description:"Kubernetes Secrets"},l=void 0,i={unversionedId:"Kubernetes-Secrets",id:"Kubernetes-Secrets",isDocsHomePage:!1,title:"Kubernetes Secrets",description:"Kubernetes Secrets",source:"@site/docs/Kubernetes-Secrets.md",sourceDirName:".",slug:"/Kubernetes-Secrets",permalink:"/kubernetes-operator/next/Kubernetes-Secrets",editUrl:"https://github.com/aerospike/kubernetes-operator/edit/main/docs/Kubernetes-Secrets.md",tags:[],version:"current",frontMatter:{title:"Kubernetes Secrets",description:"Kubernetes Secrets"},sidebar:"docsSidebar",previous:{title:"Scaling",permalink:"/kubernetes-operator/next/Scaling"},next:{title:"Delete Aerospike Cluster",permalink:"/kubernetes-operator/next/Delete-Aerospike-cluster"}},u=[{value:"Create a Secret for a Folder",id:"create-a-secret-for-a-folder",children:[],level:2},{value:"Create a Secret for a Password",id:"create-a-secret-for-a-password",children:[],level:2}],p={toc:u};function f(e){var t=e.components,r=(0,a.Z)(e,s);return(0,o.kt)("wrapper",(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Kubernetes Secrets let you store sensitive data with less risk of exposing this information. You can create secrets to set up Aerospike authentication, TLS, and features.conf. See ",(0,o.kt)("a",{parentName:"p",href:"/kubernetes-operator/next/Manage-TLS-Certificates"},"Manage-TLS-Certificates")," for more details."),(0,o.kt)("h2",{id:"create-a-secret-for-a-folder"},"Create a Secret for a Folder"),(0,o.kt)("p",null,"To create a Kubernetes Secret for connectivity to the Aerospike cluster, use the following command to package the Aerospike ",(0,o.kt)("inlineCode",{parentName:"p"},"features.conf")," in a folder and convert it to a Secret:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl  -n aerospike create secret generic aerospike-secret --from-file=config/samples/secrets\n")),(0,o.kt)("p",null,"To deploy the change, update the name of the Secret in the aerospikeConfigSecret spec of the cluster's CR file, then use kubectl to apply the change."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl apply -f aerospike-cluster.yaml\n")),(0,o.kt)("h2",{id:"create-a-secret-for-a-password"},"Create a Secret for a Password"),(0,o.kt)("p",null,"Use kubectl to create a Secret which contains the password for Aerospike cluster admin user."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl  -n aerospike create secret generic auth-secret --from-literal=password='admin123'\n")),(0,o.kt)("p",null,"To deploy with the Operator, you must include the names of the Secrets for each user in the cluster's CR file."),(0,o.kt)("p",null,"For example, suppose that you want to give two people access to the Aerospike cluster. For the admin user, you create a secret named ",(0,o.kt)("inlineCode",{parentName:"p"},"admin-secret"),". For the user, you create a secret named ",(0,o.kt)("inlineCode",{parentName:"p"},"user-secret"),". To enable security for the cluster:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"spec:\n  .\n  .\n  enable-security: true\n  .\n  aerospikeAccessControl:\n    users:\n      - name: admin\n        secretName: admin-secret\n        roles:\n          - sys-admin\n          - user-admin\n      - name: user\n        secret-name: user-secret\n        roles:\n          - data-admin\n  .\n  .\n")),(0,o.kt)("p",null,"Save and exit the CR file, then use kubectl to apply the change."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl apply -f aerospike-cluster.yaml\n")))}f.isMDXComponent=!0}}]);