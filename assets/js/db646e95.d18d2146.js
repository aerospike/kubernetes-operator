"use strict";(self.webpackChunkwebsite_operator=self.webpackChunkwebsite_operator||[]).push([[4030],{3905:function(e,t,n){n.d(t,{Zo:function(){return l},kt:function(){return f}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=r.createContext({}),c=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},l=function(e){var t=c(e.components);return r.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,p=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=c(n),f=o,k=d["".concat(p,".").concat(f)]||d[f]||u[f]||a;return n?r.createElement(k,i(i({ref:t},l),{},{components:n})):r.createElement(k,i({ref:t},l))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=d;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var c=2;c<a;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},652:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return p},metadata:function(){return c},toc:function(){return l},default:function(){return d}});var r=n(7462),o=n(3366),a=(n(7294),n(3905)),i=["components"],s={title:"Modify Aerospike cluster",description:"Modify Aerospike cluster"},p=void 0,c={unversionedId:"Aerospike-configuration-change",id:"Aerospike-configuration-change",isDocsHomePage:!1,title:"Modify Aerospike cluster",description:"Modify Aerospike cluster",source:"@site/docs/Aerospike-configuration-change.md",sourceDirName:".",slug:"/Aerospike-configuration-change",permalink:"/kubernetes-operator/next/Aerospike-configuration-change",editUrl:"https://github.com/aerospike/kubernetes-operator/edit/main/docs/Aerospike-configuration-change.md",tags:[],version:"current",frontMatter:{title:"Modify Aerospike cluster",description:"Modify Aerospike cluster"},sidebar:"docsSidebar",previous:{title:"Aerospike Access Control",permalink:"/kubernetes-operator/next/Aerospike-access-control"},next:{title:"Version Upgrade",permalink:"/kubernetes-operator/next/Version-upgrade"}},l=[{value:"Example Configuration Change",id:"example-configuration-change",children:[],level:2},{value:"Check the Pods",id:"check-the-pods",children:[],level:2}],u={toc:l};function d(e){var t=e.components,n=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"The Aerospike Kubernetes Operator makes it easier for you to use Aerospike Enterprise clusters on Kubernetes. Instead of making changes to the cluster by hand, you specify changes in the Aerospike cluster CR file, then use ",(0,a.kt)("inlineCode",{parentName:"p"},"kubectl apply")," to apply these changes. The Operator picks up on the changes and does what it needs to do in order to make them happen."),(0,a.kt)("p",null,"For this example assume that the cluster was deployed using a file named ",(0,a.kt)("inlineCode",{parentName:"p"},"aerospike-cluster.yaml"),"."),(0,a.kt)("h2",{id:"example-configuration-change"},"Example Configuration Change"),(0,a.kt)("p",null,"Change the ",(0,a.kt)("inlineCode",{parentName:"p"},"spec.aerospikeConfig.service.proto-fd-max")," field in the aerocluster CR to ",(0,a.kt)("inlineCode",{parentName:"p"},"20000")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: asdb.aerospike.com/v1beta1\nkind: AerospikeCluster\nmetadata:\n  name: aerocluster\n  namespace: aerospike\nspec:\n  size: 2\n  image: aerospike/aerospike-server-enterprise:4.9.0.33\n  aerospikeConfig:\n    service:\n      proto-fd-max: 15000\n  .\n  .\n")),(0,a.kt)("p",null,"Save and exit the CR file, then use kubectl to apply the change."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl apply -f aerospike-cluster.yaml\n")),(0,a.kt)("h2",{id:"check-the-pods"},"Check the Pods"),(0,a.kt)("p",null,"Pods will undergo a rolling restart."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"$ kubectl get pods -n aerospike\nNAME          READY   STATUS              RESTARTS   AGE\naerocluster-0-0     1/1     Running         0          3m6s\naerocluster-0-1     1/1     Running         0          3m6s\naerocluster-0-2     1/1     Running         0          30s\naerocluster-0-3     1/1     Terminating     0          30s\n")),(0,a.kt)("p",null,"After all the pods have restarted, use ",(0,a.kt)("inlineCode",{parentName:"p"},"kubectl describe")," to get status of the cluster."),(0,a.kt)("p",null,"Check ",(0,a.kt)("inlineCode",{parentName:"p"},"spec.aerospikeConfig.service.proto-fd-max")," in status."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"$ kubectl -n aerospike describe aerospikecluster aerocluster\nName:         aerocluster\nNamespace:    aerospike\nKind:         AerospikeCluster\n.\n.\nStatus:\n  Aerospike Config:\n    Service:\n      Proto - Fd - Max:   20000\n  .\n  .\n")))}d.isMDXComponent=!0}}]);